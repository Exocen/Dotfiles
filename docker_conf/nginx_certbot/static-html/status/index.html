<!DOCTYPE html>
<html lang="en">

<head>
  <title>Status</title>
  <meta charset="utf-8">
  <link rel="icon" href="/favicon2.svg" type="image/svg+xml">
  <style>
    html {
      color-scheme: light dark;
    }

    .center {
      text-align: center;
      margin: 0;
      position: absolute;
      top: 50%;
      left: 50%;
      -ms-transform: translate(-50%, -50%);
      transform: translate(-50%, -50%);
    }
  </style>
  <script>
    fetch('atom.xml')
      .then(response => {
        return response.ok ? response.text() : null
      })
      .then(text => {
        nodeList = []
        parser = new DOMParser();
        xmlDoc = parser.parseFromString(text, "text/xml");
        cats = xmlDoc.getElementsByTagName("category")

        for (el in cats) {
          element = cats[el]
          if (typeof element === 'object' && 'attributes' in element && element.attributes.term.value == 'update') {
            nodeList.push(cats[el].parentNode)
          }
        }

        document.getElementsByTagName("body")[0].innerHTML = ""
        for (n in nodeList) {
          node = nodeList[n]
          const para = document.createElement("p");
          const title = node.getElementsByTagName("title")[0].textContent;
          const summary = node.getElementsByTagName("summary")[0].textContent;
          const updated = node.getElementsByTagName("updated")[0].textContent;

          if (summary === "online") {
            child = document.createElement('p')
            child.innerHTML = title + " : <span style=\"color:green;\">" + updated + "</span>"
            para.appendChild(child)
          }
          else {
            child = document.createElement('p')
            child.innerHTML = title + " : <span style=\"color:red;\">" + updated + "</span>"
            para.appendChild(child)
          }

          document.getElementsByTagName("body")[0].appendChild(para);
        }
      })
  </script>
</head>

<body class="center">

</body>

</html>