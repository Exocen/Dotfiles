<!DOCTYPE html>
<html lang="en">

<head>
  <title>Status</title>
  <meta charset="utf-8">
  <link rel="icon" href="/favicon2.svg" type="image/svg+xml">
  <style>
    html {
      color-scheme: light dark;
    }

    .center {
      text-align: center;
      margin: 0;
      position: absolute;
      top: 50%;
      left: 50%;
      -ms-transform: translate(-50%, -50%);
      transform: translate(-50%, -50%);
    }
  </style>
  <script>
    fetch('atom.xml').then(response => { return response.ok ? response.text() : null }).then(text => {
      const categories = [].slice.call((new DOMParser()).parseFromString(text, "text/xml").getElementsByTagName("category"));
      const entries = categories.filter((category) => typeof category === 'object' && 'attributes' in category && category.attributes.term.value == 'update').map((category) => category.parentNode);

      if (entries.length !== 0) { document.body.innerHTML = ""; }
      entries.forEach(node => {
        let para = document.createElement("p");
        const title = node.getElementsByTagName("title")[0].textContent;
        const summary = node.getElementsByTagName("summary")[0].textContent;
        const updated = node.getElementsByTagName("updated")[0].textContent;
        const color = summary === "online" ? "green" : "red";
        para.innerHTML = title + " : <span style=\"color:" + color + ";\">" + updated + "</span>";
        document.body.appendChild(para);
      }
      )
    })

  </script>
</head>

<body class="center">

</body>

</html>